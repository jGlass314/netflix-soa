const Router = require('koa-router');
const axios = require('axios');
const faker = require('faker');

const router = new Router();
const BASE_URL_CONTENT = `/content`;
const BASE_URL_HOME = `/home`;
const CFS_ADDRESS = 'http://localhost:3000';

let homeListings = {};
homeListings['drama'] = [
  "ce257d19-4e21-42b4-9832-bfb1580167f4",
  "10af73f1-747b-461a-aa3e-12c4fcd79fd0",
  "b38c5e13-04a1-4244-83c9-1cec20f17a19",
  "d6aa3ff4-cf1e-49f1-961e-038a8478e954",
  "f1ec97b5-9ef6-4ad3-8413-373ee487c4ed",
  "b7c88647-f79f-4a6c-b23b-52ac252867b2",
  "f6d6a3e1-f2e8-4fcc-abda-630101ece413",
  "ea247eb6-5bc0-456a-aa26-c53de591b8ff",
  "b3b55813-c56f-4834-ae8b-ae6efb5ad4bb",
  "9e034f77-a95e-4a85-a9b3-4ae36b03e12f",
  "fd078e71-24c2-4bb6-964c-9c87b25fdc0e",
  "2a72847f-bb0e-4586-9da2-38e5f87f8513",
  "80880636-62ee-44ea-83b7-f63d09406e88",
  "a847e69a-7ad6-4a97-bf95-4a3c986fb9c2",
  "65f9ea01-1476-4a96-837a-3a8939c15a7d",
  "672e3dd4-ac69-49fc-af6d-909733acb221",
  "163fd20a-f709-496f-a5e0-b66b420645bf",
  "a0bf0da8-d561-44b7-9df6-ca1860714fb1",
  "6bc69dc1-1178-4dfa-aa26-08625c624595",
  "8d9ef4a6-5531-4fad-bfaa-e33b2212e6d6",
  "fe0b4eda-d67b-4b7c-b454-a1333dbd180c",
  "21ac141b-496f-480f-9d31-a6ea3816e253",
  "d83aa3dc-89c1-41f7-8966-309665eacda5",
  "c88c0b3a-e7b5-4083-98bf-6e6437d4cbb9",
  "fab18a64-6038-4b71-bf9d-c6f89de35d33",
  "4effbf42-f307-427e-9827-62cc7ab64fb0",
  "49454216-6291-4465-af41-736407046668",
  "d2d4befe-c28d-4524-8e51-ab5c5555bede",
  "11bb2773-f39c-4e2b-93a8-a3502d571383",
  "aa34825e-2564-44c5-824e-7d5ef1f38c10",
  "8a577f85-5b24-4200-b458-5ff286616e84",
  "ffa3f548-f10e-43d1-90ba-02b6aee47321",
  "c871b47a-f3e9-4b49-b97d-8ad920c72197",
  "5468c34d-1ce8-4e70-a2b8-92f3a0863459",
  "7f9c5fba-2fef-4806-94b0-61b9f916c811",
  "f2b783b4-91d8-4a4f-b681-dec1eeeac5f0",
  "10cf62ff-d2c1-46ec-93a8-35cc9a1a2aa1",
  "283c4845-01c5-4297-9c5d-66b60b87c40a",
  "188a171b-ec83-4b2e-afd5-0457917b09cf",
  "9476ef65-b2bb-493c-9cc4-c119e7eae063",
  "6ad7d97b-8211-43ed-aa30-3b2a6bf26992",
  "4943186c-4007-487b-99a1-ce1c19747025",
  "7867cfc3-4e5f-4b7c-9021-444ef336e4ae",
  "bebadcc7-3f43-4c62-98d8-4b437751258e",
  "8b328aaa-7eb9-4ba0-afa9-e7159d6c90c8",
  "b283bf1f-2e14-4f65-9a58-67cdf3509fda",
  "adac0509-c84d-4c00-8258-3b05112cf5ac",
  "aa9548a7-7368-4102-a81d-6047f4c9a836",
  "5627e0a5-7554-4d93-8f9c-221cf847dc4d",
  "23705dc3-de1e-43e1-8e09-afae7d5086f2",
  "bbb16787-9970-4329-bfaf-41d6cdebd833",
  "c9d62358-7c85-4087-bfe0-84538140c821",
  "7046fbe3-eb19-42e4-a9ae-a0937712bc88",
  "ab08dcb3-ff50-40e6-a30a-4c408a94456e",
  "844728af-6b5c-4c41-985e-af6cbaa8fd43",
  "a0670b51-b1a7-4781-900b-d6ab79b4edfa",
  "077adc42-fb5c-4a93-9d4c-6267c34c90d3",
  "9ff32650-8505-43af-b999-df68ec1cf4df",
  "366b7b1a-079c-41c0-8f7b-ec0ad9cb85fd",
  "4ecac828-c934-40e2-88b7-488444453113",
  "35a16225-f8b6-468e-8342-39acbea42649",
  "8196b11b-fed0-4b64-8d36-8387ea4f369a",
  "17c07c1a-cc01-4387-be44-8a93b977bdad",
  "1b78b140-1b13-4bd3-853e-7db617f05d03",
  "eb2ab42c-82d8-4435-949c-432d65515ac6",
  "1caf475f-5be3-4d89-b007-d77289f0dbb8",
  "9805b051-68e2-47c8-a4da-91ecec4926c4",
  "ad36c9eb-e1ba-4099-8ae8-078c54fa697e",
  "fca3419a-7ef2-4a73-a9cd-82da7dd4a524",
  "ec8d9d6f-5ce0-4364-9c8c-d24462b02bb8",
  "fdd26b1c-79fe-4580-b8c9-85a0131cd888",
  "97ef7eeb-0c0b-47a2-873c-fb53588ea1f6",
  "4a7b9040-c325-4b29-8c42-95b78d89f65e",
  "9bfdb0cb-cfe2-477e-9b74-8fd9c5526443",
  "4786a30b-0543-4b0a-88b6-ed44e580015a",
  "5759c92b-99cd-4d65-8224-4643f8e1abf2",
  "5e04a3e1-fc67-42b6-839c-bfd65f5e2b75",
  "b556fa7b-2a0e-4323-9581-8385bae34c26",
  "4b970d06-0120-4f8a-a63a-3efa63460720",
  "94b363ad-f3a0-46af-bbe7-128d04002d6f",
  "2573641b-9795-4cb2-a420-16c4d8826bcf",
  "15114472-e00e-45d4-9e91-d8c255628c5c",
  "2b8b48c6-29f7-4ab2-ac51-38a95712e214",
  "e0137e90-fadc-4119-8efc-95065a4688cf",
  "dcc343a2-887d-4e04-a3d7-cc9cd9409aba",
  "0930d659-e588-4b1c-ae78-c9ab5f007037",
  "e388a466-01a4-4d79-840c-bc894c02eba7",
  "134e4f3d-7013-4c33-8273-b859200a270c",
  "e2ba9706-729a-4e22-8c2a-e81fb0bc7cf4",
  "4096ee86-e9bb-4560-9299-bbc8873cd42f",
  "2c5a4ab3-683f-48b3-a82b-2c8411ddb6ce",
  "2194941a-ccdd-4ba4-9fed-389acb9238b4",
  "23a88139-535a-4c65-a9f4-753f32986333",
  "6fc641b5-eb31-4423-83aa-7ef5cf506bec",
  "94a4acba-0c0f-404a-a3b0-13c715462bcd",
  "18a7f0c3-879d-4fa1-a57d-47532f862a6c",
  "d9b55934-b4a7-4080-b26c-a93e48616c50",
  "02c8b1df-84e2-41ed-baf6-921ee91c6a8e",
  "d9b55934-b4a7-4080-b26c-a93e48616c50",
  "02c8b1df-84e2-41ed-baf6-921ee91c6a8e",
  "ce257d19-4e21-42b4-9832-bfb1580167f4",
  "10af73f1-747b-461a-aa3e-12c4fcd79fd0"
];
homeListings['comedy'] = [
  "b38c5e13-04a1-4244-83c9-1cec20f17a19",
  "d6aa3ff4-cf1e-49f1-961e-038a8478e954",
  "f1ec97b5-9ef6-4ad3-8413-373ee487c4ed",
  "b7c88647-f79f-4a6c-b23b-52ac252867b2",
  "f6d6a3e1-f2e8-4fcc-abda-630101ece413",
  "ea247eb6-5bc0-456a-aa26-c53de591b8ff",
  "b3b55813-c56f-4834-ae8b-ae6efb5ad4bb",
  "9e034f77-a95e-4a85-a9b3-4ae36b03e12f",
  "fd078e71-24c2-4bb6-964c-9c87b25fdc0e",
  "2a72847f-bb0e-4586-9da2-38e5f87f8513",
  "80880636-62ee-44ea-83b7-f63d09406e88",
  "a847e69a-7ad6-4a97-bf95-4a3c986fb9c2",
  "65f9ea01-1476-4a96-837a-3a8939c15a7d",
  "672e3dd4-ac69-49fc-af6d-909733acb221",
  "163fd20a-f709-496f-a5e0-b66b420645bf",
  "a0bf0da8-d561-44b7-9df6-ca1860714fb1",
  "6bc69dc1-1178-4dfa-aa26-08625c624595",
  "8d9ef4a6-5531-4fad-bfaa-e33b2212e6d6",
  "fe0b4eda-d67b-4b7c-b454-a1333dbd180c",
  "21ac141b-496f-480f-9d31-a6ea3816e253",
  "d83aa3dc-89c1-41f7-8966-309665eacda5",
  "c88c0b3a-e7b5-4083-98bf-6e6437d4cbb9",
  "fab18a64-6038-4b71-bf9d-c6f89de35d33",
  "4effbf42-f307-427e-9827-62cc7ab64fb0",
  "49454216-6291-4465-af41-736407046668",
  "d2d4befe-c28d-4524-8e51-ab5c5555bede",
  "11bb2773-f39c-4e2b-93a8-a3502d571383",
  "aa34825e-2564-44c5-824e-7d5ef1f38c10",
  "8a577f85-5b24-4200-b458-5ff286616e84",
  "ffa3f548-f10e-43d1-90ba-02b6aee47321",
  "c871b47a-f3e9-4b49-b97d-8ad920c72197",
  "5468c34d-1ce8-4e70-a2b8-92f3a0863459",
  "7f9c5fba-2fef-4806-94b0-61b9f916c811",
  "f2b783b4-91d8-4a4f-b681-dec1eeeac5f0",
  "10cf62ff-d2c1-46ec-93a8-35cc9a1a2aa1",
  "283c4845-01c5-4297-9c5d-66b60b87c40a",
  "188a171b-ec83-4b2e-afd5-0457917b09cf",
  "9476ef65-b2bb-493c-9cc4-c119e7eae063",
  "6ad7d97b-8211-43ed-aa30-3b2a6bf26992",
  "4943186c-4007-487b-99a1-ce1c19747025",
  "7867cfc3-4e5f-4b7c-9021-444ef336e4ae",
  "bebadcc7-3f43-4c62-98d8-4b437751258e",
  "8b328aaa-7eb9-4ba0-afa9-e7159d6c90c8",
  "b283bf1f-2e14-4f65-9a58-67cdf3509fda",
  "adac0509-c84d-4c00-8258-3b05112cf5ac",
  "aa9548a7-7368-4102-a81d-6047f4c9a836",
  "5627e0a5-7554-4d93-8f9c-221cf847dc4d",
  "23705dc3-de1e-43e1-8e09-afae7d5086f2",
  "bbb16787-9970-4329-bfaf-41d6cdebd833",
  "c9d62358-7c85-4087-bfe0-84538140c821",
  "7046fbe3-eb19-42e4-a9ae-a0937712bc88",
  "ab08dcb3-ff50-40e6-a30a-4c408a94456e",
  "844728af-6b5c-4c41-985e-af6cbaa8fd43",
  "a0670b51-b1a7-4781-900b-d6ab79b4edfa",
  "077adc42-fb5c-4a93-9d4c-6267c34c90d3",
  "9ff32650-8505-43af-b999-df68ec1cf4df",
  "366b7b1a-079c-41c0-8f7b-ec0ad9cb85fd",
  "4ecac828-c934-40e2-88b7-488444453113",
  "35a16225-f8b6-468e-8342-39acbea42649",
  "8196b11b-fed0-4b64-8d36-8387ea4f369a",
  "17c07c1a-cc01-4387-be44-8a93b977bdad",
  "1b78b140-1b13-4bd3-853e-7db617f05d03",
  "eb2ab42c-82d8-4435-949c-432d65515ac6",
  "1caf475f-5be3-4d89-b007-d77289f0dbb8",
  "9805b051-68e2-47c8-a4da-91ecec4926c4",
  "ad36c9eb-e1ba-4099-8ae8-078c54fa697e",
  "fca3419a-7ef2-4a73-a9cd-82da7dd4a524",
  "ec8d9d6f-5ce0-4364-9c8c-d24462b02bb8",
  "fdd26b1c-79fe-4580-b8c9-85a0131cd888",
  "97ef7eeb-0c0b-47a2-873c-fb53588ea1f6",
  "4a7b9040-c325-4b29-8c42-95b78d89f65e",
  "9bfdb0cb-cfe2-477e-9b74-8fd9c5526443",
  "4786a30b-0543-4b0a-88b6-ed44e580015a",
  "5759c92b-99cd-4d65-8224-4643f8e1abf2",
  "5e04a3e1-fc67-42b6-839c-bfd65f5e2b75",
  "b556fa7b-2a0e-4323-9581-8385bae34c26",
  "4b970d06-0120-4f8a-a63a-3efa63460720",
  "94b363ad-f3a0-46af-bbe7-128d04002d6f",
  "2573641b-9795-4cb2-a420-16c4d8826bcf",
  "15114472-e00e-45d4-9e91-d8c255628c5c",
  "2b8b48c6-29f7-4ab2-ac51-38a95712e214",
  "e0137e90-fadc-4119-8efc-95065a4688cf",
  "dcc343a2-887d-4e04-a3d7-cc9cd9409aba",
  "0930d659-e588-4b1c-ae78-c9ab5f007037",
  "e388a466-01a4-4d79-840c-bc894c02eba7",
  "134e4f3d-7013-4c33-8273-b859200a270c",
  "e2ba9706-729a-4e22-8c2a-e81fb0bc7cf4",
  "4096ee86-e9bb-4560-9299-bbc8873cd42f",
  "2c5a4ab3-683f-48b3-a82b-2c8411ddb6ce",
  "2194941a-ccdd-4ba4-9fed-389acb9238b4",
  "23a88139-535a-4c65-a9f4-753f32986333",
  "6fc641b5-eb31-4423-83aa-7ef5cf506bec",
  "94a4acba-0c0f-404a-a3b0-13c715462bcd",
  "18a7f0c3-879d-4fa1-a57d-47532f862a6c",
  "d9b55934-b4a7-4080-b26c-a93e48616c50",
  "02c8b1df-84e2-41ed-baf6-921ee91c6a8e",
  "d9b55934-b4a7-4080-b26c-a93e48616c50",
  "02c8b1df-84e2-41ed-baf6-921ee91c6a8e",
  "ce257d19-4e21-42b4-9832-bfb1580167f4",
  "10af73f1-747b-461a-aa3e-12c4fcd79fd0",
  "b38c5e13-04a1-4244-83c9-1cec20f17a19"
]
homeListings['horror'] =[
  "d6aa3ff4-cf1e-49f1-961e-038a8478e954",
  "f1ec97b5-9ef6-4ad3-8413-373ee487c4ed",
  "b7c88647-f79f-4a6c-b23b-52ac252867b2",
  "f6d6a3e1-f2e8-4fcc-abda-630101ece413",
  "ea247eb6-5bc0-456a-aa26-c53de591b8ff",
  "b3b55813-c56f-4834-ae8b-ae6efb5ad4bb",
  "9e034f77-a95e-4a85-a9b3-4ae36b03e12f",
  "fd078e71-24c2-4bb6-964c-9c87b25fdc0e",
  "2a72847f-bb0e-4586-9da2-38e5f87f8513",
  "80880636-62ee-44ea-83b7-f63d09406e88",
  "a847e69a-7ad6-4a97-bf95-4a3c986fb9c2",
  "65f9ea01-1476-4a96-837a-3a8939c15a7d",
  "672e3dd4-ac69-49fc-af6d-909733acb221",
  "163fd20a-f709-496f-a5e0-b66b420645bf",
  "a0bf0da8-d561-44b7-9df6-ca1860714fb1",
  "6bc69dc1-1178-4dfa-aa26-08625c624595",
  "8d9ef4a6-5531-4fad-bfaa-e33b2212e6d6",
  "fe0b4eda-d67b-4b7c-b454-a1333dbd180c",
  "21ac141b-496f-480f-9d31-a6ea3816e253",
  "d83aa3dc-89c1-41f7-8966-309665eacda5",
  "c88c0b3a-e7b5-4083-98bf-6e6437d4cbb9",
  "fab18a64-6038-4b71-bf9d-c6f89de35d33",
  "4effbf42-f307-427e-9827-62cc7ab64fb0",
  "49454216-6291-4465-af41-736407046668",
  "d2d4befe-c28d-4524-8e51-ab5c5555bede",
  "11bb2773-f39c-4e2b-93a8-a3502d571383",
  "aa34825e-2564-44c5-824e-7d5ef1f38c10",
  "8a577f85-5b24-4200-b458-5ff286616e84",
  "ffa3f548-f10e-43d1-90ba-02b6aee47321",
  "c871b47a-f3e9-4b49-b97d-8ad920c72197",
  "5468c34d-1ce8-4e70-a2b8-92f3a0863459",
  "7f9c5fba-2fef-4806-94b0-61b9f916c811",
  "f2b783b4-91d8-4a4f-b681-dec1eeeac5f0",
  "10cf62ff-d2c1-46ec-93a8-35cc9a1a2aa1",
  "283c4845-01c5-4297-9c5d-66b60b87c40a",
  "188a171b-ec83-4b2e-afd5-0457917b09cf",
  "9476ef65-b2bb-493c-9cc4-c119e7eae063",
  "6ad7d97b-8211-43ed-aa30-3b2a6bf26992",
  "4943186c-4007-487b-99a1-ce1c19747025",
  "7867cfc3-4e5f-4b7c-9021-444ef336e4ae",
  "bebadcc7-3f43-4c62-98d8-4b437751258e",
  "8b328aaa-7eb9-4ba0-afa9-e7159d6c90c8",
  "b283bf1f-2e14-4f65-9a58-67cdf3509fda",
  "adac0509-c84d-4c00-8258-3b05112cf5ac",
  "aa9548a7-7368-4102-a81d-6047f4c9a836",
  "5627e0a5-7554-4d93-8f9c-221cf847dc4d",
  "23705dc3-de1e-43e1-8e09-afae7d5086f2",
  "bbb16787-9970-4329-bfaf-41d6cdebd833",
  "c9d62358-7c85-4087-bfe0-84538140c821",
  "7046fbe3-eb19-42e4-a9ae-a0937712bc88",
  "ab08dcb3-ff50-40e6-a30a-4c408a94456e",
  "844728af-6b5c-4c41-985e-af6cbaa8fd43",
  "a0670b51-b1a7-4781-900b-d6ab79b4edfa",
  "077adc42-fb5c-4a93-9d4c-6267c34c90d3",
  "9ff32650-8505-43af-b999-df68ec1cf4df",
  "366b7b1a-079c-41c0-8f7b-ec0ad9cb85fd",
  "4ecac828-c934-40e2-88b7-488444453113",
  "35a16225-f8b6-468e-8342-39acbea42649",
  "8196b11b-fed0-4b64-8d36-8387ea4f369a",
  "17c07c1a-cc01-4387-be44-8a93b977bdad",
  "1b78b140-1b13-4bd3-853e-7db617f05d03",
  "eb2ab42c-82d8-4435-949c-432d65515ac6",
  "1caf475f-5be3-4d89-b007-d77289f0dbb8",
  "9805b051-68e2-47c8-a4da-91ecec4926c4",
  "ad36c9eb-e1ba-4099-8ae8-078c54fa697e",
  "fca3419a-7ef2-4a73-a9cd-82da7dd4a524",
  "ec8d9d6f-5ce0-4364-9c8c-d24462b02bb8",
  "fdd26b1c-79fe-4580-b8c9-85a0131cd888",
  "97ef7eeb-0c0b-47a2-873c-fb53588ea1f6",
  "4a7b9040-c325-4b29-8c42-95b78d89f65e",
  "9bfdb0cb-cfe2-477e-9b74-8fd9c5526443",
  "4786a30b-0543-4b0a-88b6-ed44e580015a",
  "5759c92b-99cd-4d65-8224-4643f8e1abf2",
  "5e04a3e1-fc67-42b6-839c-bfd65f5e2b75",
  "b556fa7b-2a0e-4323-9581-8385bae34c26",
  "4b970d06-0120-4f8a-a63a-3efa63460720",
  "94b363ad-f3a0-46af-bbe7-128d04002d6f",
  "2573641b-9795-4cb2-a420-16c4d8826bcf",
  "15114472-e00e-45d4-9e91-d8c255628c5c",
  "2b8b48c6-29f7-4ab2-ac51-38a95712e214",
  "e0137e90-fadc-4119-8efc-95065a4688cf",
  "dcc343a2-887d-4e04-a3d7-cc9cd9409aba",
  "0930d659-e588-4b1c-ae78-c9ab5f007037",
  "e388a466-01a4-4d79-840c-bc894c02eba7",
  "134e4f3d-7013-4c33-8273-b859200a270c",
  "e2ba9706-729a-4e22-8c2a-e81fb0bc7cf4",
  "4096ee86-e9bb-4560-9299-bbc8873cd42f",
  "2c5a4ab3-683f-48b3-a82b-2c8411ddb6ce",
  "2194941a-ccdd-4ba4-9fed-389acb9238b4",
  "23a88139-535a-4c65-a9f4-753f32986333",
  "6fc641b5-eb31-4423-83aa-7ef5cf506bec",
  "94a4acba-0c0f-404a-a3b0-13c715462bcd",
  "18a7f0c3-879d-4fa1-a57d-47532f862a6c",
  "d9b55934-b4a7-4080-b26c-a93e48616c50",
  "02c8b1df-84e2-41ed-baf6-921ee91c6a8e",
  "d9b55934-b4a7-4080-b26c-a93e48616c50",
  "02c8b1df-84e2-41ed-baf6-921ee91c6a8e"
];
// homeListings['comedy'] = ['4e1fe925-b696-4b87-a207-d02091f13f98', '37cefab2-a95e-4b45-b696-0414ee481933', '4083d465-b696-4a72-a54b-a63b10e92f30'];
// homeListings['horror'] = ['5a6f5398-281f-4813-b696-95812a726e28', 'dcbad633-d10e-4fcf-b696-2b2f2fcc3e8a', 'b077d5f4-afb0-4e8f-b696-48b89d3ac51e'];

// on server startup, post home listings to cfs
axios.post(`${CFS_ADDRESS}${BASE_URL_HOME}`, {
  homePage: homeListings
})
.then(response => {
  console.log('/home post response:', response.data.message);
})
.catch(err => {
  console.error('/home post error:', err);
})

// *** Endpoints ***
router.get(`${BASE_URL_CONTENT}/:videoId`, async (ctx) => {
  try {
    console.log('videoId to CONTENT service GET:', ctx.request.query);
    ctx.status = 200;
    ctx.body = {
      status: 'success',
      data: makeFakeContent(1, [ctx.params.videoId])
    };
  } catch (err) {
    ctx.status = 404;
    ctx.body = {
      status: 'error',
      message: err.message || 'Sorry, an error has occurred.'
    };
  }
})

const makeFakeContent = (number, videoIds) => {
  var videos = [];
  for(var i = 0; i < number; i++) {
    videos.push({
      id: videoIds[i],
      description: faker.random.words(30),
      genre: [faker.random.word(), faker.random.word(), faker.random.word()],
      title: faker.random.words(),
      thumbnailURL: faker.image.imageUrl(),
      trailerURL: faker.image.imageUrl(),
      cast: [
        faker.name.firstName() + ' ' + faker.name.lastName(),
        faker.name.firstName() + ' ' + faker.name.lastName(),
        faker.name.firstName() + ' ' + faker.name.lastName()
      ],
      director: faker.name.firstName() + ' ' + faker.name.lastName(),
      duration: Math.floor(Math.random() * 3*60*60),
      rating: ['G','PG','PG-13','R'][Math.floor(Math.random() * 4)%4],
      releaseDate: faker.date.past(),
      locationURI: faker.internet.url(),
      isOriginal: Boolean(Math.floor(Math.random() * 2)),
      isMovie: Boolean(Math.floor(Math.random() * 2)),
      region: [faker.address.country(),faker.address.country(),faker.address.country()]
    });
  }
  return videos;
}

module.exports = router;